<!DOCTYPE HTML>
<html>
<head>
</head>
<body>
<input id="user-name">
<input id="message-box">
<button id="enter-button">send</button>
<div id="messages"></div>
<script>
    var user_input = document.getElementById("user-name");
    var div_mes = document.getElementById("messages");
    var send_button = document.getElementById("enter-button");
    var input_box = document.getElementById("message-box");
    function build_message(text) {
        var messages_array = text.split("\n");
        console.log(messages_array);
        for (message in messages_array) {
            var p = document.createElement("p");
            p.appendChild(document.createTextNode(messages_array[message]));
            p.appendChild(document.createElement("br"));
            div_mes.appendChild(p);
        };
    }
    send_button.onclick = function() {
        ws.send(user_input.value + ": " + input_box.value);
        input_box.data = '';
    };
    var ws = new WebSocket("ws://localhost:8187");
    ws.onmessage = function(e) {
        build_message(e.data);
    };
    ws.onclose = function() { "WebScked connection closed"; };
</script>
</body>
</html>